<launch>
  <include file="$(find rtt_ros)/launch/deployer.launch">
    <arg name="NAME" value="barrett"/>
    <arg name="DEPLOYER_ARGS" value="-s $(find oro_barrett_hw)/test/idle_test.ops"/>
    <arg name="LOG_LEVEL" value="debug"/>
    <arg name="DEBUG" value="false"/>
  </include>

  <param name="robot_description" command="$(find xacro)/xacro.py '$(find barrett_model)/robots/wam7.urdf.xacro'" />

  <group ns="barrett/barrett_manager">
    <rosparam subst_value="true">
      # Auto-configuration
      bus_id: 0
      auto_configure_wam: true
      wam_dof: 7
      wam_urdf_prefix: wam

      # WAM Parameters
      wam:
        velocity_smoothing_factor: 0.95
        home_position: [0.0, -1.5708, 0.0, 3.1415, 0.0, -1.5708, 1.5708]
        home_resolver_offset: [0.42644, 0.62126, 0.96947, -1.23025,  1.81463, 0.59365, 2.4942]
    </rosparam>

    <node pkg="robot_state_publisher" type="robot_state_publisher" name="wam_state_publisher">
      <param name="publish_frequency" value="50"/>
      <remap from="joint_states" to="wam/joint_states"/>
    </node>
  </group>
</launch>
